/* v 3.0.9
author http://codecanyon.net/user/creativeinteractivemedia/portfolio?ref=creativeinteractivemedia
*/

function isAllWhitespace(e){return!NonWhitespaceRegexp.test(e)}var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.PdfService=function(e,t,n){function i(t,n){t.htmlContent?n(t):t.getTextContent().then(function(i){t.textContent=i;var s=document.createElement("div");s.classList.add("flipbook-page-htmlContent");var r=new PDFLinkService;r.setViewer(a.main),r.setDocument(e);var d=document.createElement("div");new AnnotationLayerBuilder({pageDiv:d,pdfPage:t,linkService:r}).render(t.getViewport(1e3/a.viewports[0].height),"display"),s.appendChild(d),t.htmlContent=s,n(t)})}var a=this;this.pdfDocument=e,this.pdfInfo=e.pdfInfo,this.webgl="webgl"==n.viewMode,this.options=n,this.main=n.main,this.pages=[],this.canvasBuffer=[],this.viewports=[],this.textContents=[],this.pdfPages=[],this.pdfPagesRendering=[],this.pdfPagesRendered=[],this.bookPagesRendered=[],this.pdfAnnotations=[];for(var s=n.isMobile?40:200,r=0;r<s;r++){var d=document.createElement("canvas");d.width=10,d.height=10,d._name=r,d.available=!0,d.pageIndex=-100,d.pdfPageIndex=-1,this.canvasBuffer.push(d)}this.getCanvas=function(){var e,t;for(e=0;e<this.canvasBuffer.length;e++)if((t=this.canvasBuffer[e]).available){t.available=!1,t.double=!1;break}return this.canvasBuffer.splice(e,1),this.canvasBuffer.push(t),t},this.setRightIndex=function(e){var t=this,n=[],i=this.options.isMobile?4:20;this.canvasBuffer.forEach(function(a){a.available=e-a.pageIndex>3+i||e-a.pageIndex<-2-i,a.available&&a.pageIndex>-1&&(t.pdfPagesRendered[a.pdfPageIndex][a.size]=!1,delete t.pages[a.pdfPageIndex].canvas[a.size],t.pages[a.pdfPageIndex].rendering=!1,t.pages[a.pdfPageIndex].cleanup(),n.push({index:a.pageIndex,size:a.size}),a.double&&n.push({index:a.pageIndex-1,size:a.size}),a.pageIndex=-100,a.getContext("2d").clearRect(0,0,a.width,a.height))}),n.length>0&&this.options.pageUnloaded(n)},window.s=function(){var e=document.createElement("div");document.body.appendChild(e),a.canvasBuffer.forEach(function(t){var n=document.createElement("span");n.style.margin="2px",n.style.background="#ccc",n.style.display="inline-block",e.appendChild(n);var i=t.toDataURL(),a=new Image;a.src=i,a.style.border=t.available?"1px solid #0F0":"1px solid #F00",n.appendChild(a),a.height=100;var s=document.createElement("span");s.style.display="block",n.appendChild(s),s.innerText=t.pageIndex+";"+t.pdfPageIndex+";"+t.size})},this.loadThumbs=function(e,t){var n=this;this.thumbLoading=this.thumbLoading||0,this.thumbLoading>=this.pdfInfo.numPages?t.call(n):this.loadThumb(this.thumbLoading,function(i){n.options.thumbLoaded(i),n.thumbLoading++,n.loadThumbs(e,t)})},this.loadThumb=function(e,t){var n=this;this.getViewport(e,function(){var i=n.pages[e],a=100/i.getViewport(1).height,s=i.getViewport(a),r=document.createElement("canvas");r.index=e;var d=r.getContext("2d");r.height=s.height,r.width=s.width;var o={canvasContext:d,viewport:s};i.cleanupAfterRender=!0,i.render(o).then(function(){i.cleanup(),t&&t.call(n,r)})})},this.getBookPage=function(e,t){},this.init=function(e){a.getViewport(0,function(t){a.r1=t.width/t.height,1==a.pdfInfo.numPages?(a.double=!1,e.call(a)):a.getViewport(1,function(t){a.r2=t.width/t.height,a.double=a.r2/a.r1>1.5,a.backCover=!0,e.call(a)})})},this.getViewport=function(t,n){t>=e.pdfInfo.numPages||(a.pages[t]?(a.viewports[t]=a.pages[t].getViewport(1),n.call(a,a.viewports[t])):e.getPage(t+1).then(function(e){a.pages[e.pageIndex]=e,a.getViewport(e.pageIndex,n)}))},this.getPage=function(t,n){var i=this;(i.double?Math.round(t/2)+1:t+1)>this.pdfInfo.numPages||e.getPage(t).then(function(e){i.renderPage(e,n)})},this.renderPage=function(e,t,n){var a=this;e.canvas=e.canvas||{},e.canvas[t]?n.call(a,e):(e.rendering&&setTimeout(function(){a.renderPage(e,t,n)},300),e.rendering=!0,i(e,function(){var i=e.getViewport(1),s=i.width<=i.height,r=s?t/i.height:t/i.width,d=e.getViewport(r),o=a.getCanvas();o.width=d.width,o.height=d.height,o.rendering=!0,a.webgl&&(s?(o.height=t,o.width=d.width>t?d.width:t,o.scaleX=d.width/t,o.scaleY=1):(o.width=t,o.height=d.height>t?d.height:t,o.scaleY=d.height/t,o.scaleX=1));var h=o.getContext("2d");h.fillStyle="#FFFFFF",h.fillStyle="#000000";var g={canvasContext:h,viewport:d};e.scale=r,e.canvas[t]=o,e.canvas[t].ratio=d.width/d.height,e.cleanupAfterRender=!0,e.render(g).promise.then(function(){g=null,n&&n.call(a,e)})}))},this.renderPageFromPdf=function(e,t,n){var i=this;if(e>=this.pdfInfo.numPages&&n.call(i),this.pages[e]){var a=e,s=this.pages[e],r=s.getViewport(1);Math.max(r.width,r.height),r.height;i.pdfPagesRendering[a]&&i.pdfPagesRendering[a][t]||(i.pdfPagesRendered[a]&&i.pdfPagesRendered[a][t]?i.onPdfPageRendered(i.pages[a],t,n):(i.pdfPagesRendered[a]=i.pdfPagesRendered[a]||{},i.pdfPagesRendering[a]=i.pdfPagesRendering[a]||{},i.pdfPagesRendering[a][t]=!0,this.renderPage(s,t,function(e){i.pdfPagesRendering[a][t]=!1,i.pdfPagesRendered[a][t]=!0,i.onPdfPageRendered(e,t,n)})))}else this.getViewport(e,function(a){i.renderPageFromPdf(e,t,n)})},this.onBookPageRendered=function(e,t,i,a){this.bookPagesRendered.push({index:i,pdfPageIndex:e.pageIndex,size:a}),n.pages[i].canvas=n.pages[i].canvas||{},n.pages[i].canvas[a]=t,n.pageLoaded(i,a)},this.onPdfPageRendered=function(e,t,i){function a(e,t){var i=n.pages[t];i.htmlContentInitialized||(i.htmlContent&&jQuery(e).append(jQuery(i.htmlContent)),i.htmlContentInitialized=!0,i.htmlContent=e)}var s=this;if(e.canvas&&e.canvas[t]){var r=e.canvas[t],d=e.htmlContent,o=e.pageIndex;if(r.pdfPageIndex=o,r.rendering=!1,void 0!==r){if("doubleWithCover"==n.pageMode)if(0==o)a(d,o),r.pageIndex=0,r.size=t,s.onBookPageRendered(e,r,0,t);else if(o==n.pages.length/2)a(d,n.numPages-1),r.pageIndex=n.numPages-1,r.size=t,s.onBookPageRendered(e,r,n.numPages-1,t);else if(d.style.transformOrigin="0 0",s.webgl){r.double=!0,r.scaleX=r.width/2/t,r.scaleY=r.scaleY;u=d.cloneNode(!0);a(d,2*o-1),a(u,2*o),s.onBookPageRendered(e,r,2*o,t),s.onBookPageRendered(e,r,2*o-1,t),r.pageIndex=2*o,r.size=t}else{var h=s.getCanvas(),g=h.getContext("2d");h.rendering=!0,h.width=r.width/2,h.height=r.height,g.fillStyle="#FFFFFF",g.drawImage(r,r.width/2,0,r.width/2,r.height,0,0,r.width/2,r.height),h.rendering=!1;var l=s.options.rightToLeft?2*o-1:2*o;h.pageIndex=l,h.pdfPageIndex=o,h.size=t;var f=s.getCanvas(),c=f.getContext("2d");f.width=r.width/2,f.height=r.height,f.rendering=!0,c.fillStyle="#FFFFFF",c.drawImage(r,0,0),f.rendering=!1;var p=s.options.rightToLeft?2*o:2*o-1;f.pageIndex=p,f.pdfPageIndex=o,f.size=t;var u=d.cloneNode(!0);a(d,2*o-1),a(u,2*o),s.onBookPageRendered(e,h,l,t),s.onBookPageRendered(e,f,p,t),r.available=!0,r.getContext("2d").clearRect(0,0,r.width,r.height),r.pageIndex=-100,r.size=t}else a(d,o),r.pageIndex=o,r.size=t,s.onBookPageRendered(e,r,o,t);i&&i.call(s,{canvas:r,size:t,pdfPageIndex:o})}}},this.getCanvasByHeight=function(e,t,n){},this.getThumb=function(e,t){}};var TEXT_LAYER_RENDER_DELAY=200,MAX_TEXT_DIVS_TO_RENDER=1e5,NonWhitespaceRegexp=/\S/,TextLayerBuilder=function(){function e(e){this.textLayerDiv=e.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=e.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=e.viewport,this.textDivs=[],this.findController=e.findController||null,this.textLayerRenderTask=null,this._bindMouse()}return e.prototype={_finishRendering:function(){this.renderingDone=!0;var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e);var t=document.createEvent("CustomEvent");t.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:this.pageNumber}),this.textLayerDiv.dispatchEvent(t)},render:function(e){if(this.divContentDone&&!this.renderingDone){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var t=document.createDocumentFragment();this.textLayerRenderTask=PDFJS.renderTextLayer({textContent:this.textContent,container:t,viewport:this.viewport,textDivs:this.textDivs,timeout:e}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(t),this._finishRendering(),this.updateMatches()}.bind(this),function(e){})}},setTextContent:function(e){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=e,this.divContentDone=!0},convertMatches:function(e){for(var t=0,n=0,i=this.textContent.items,a=i.length-1,s=null===this.findController?0:this.findController.state.query.length,r=[],d=0,o=e.length;d<o;d++){for(var h=e[d];t!==a&&h>=n+i[t].str.length;)n+=i[t].str.length,t++;t===i.length&&console.error("Could not find a matching mapping");var g={begin:{divIdx:t,offset:h-n}};for(h+=s;t!==a&&h>n+i[t].str.length;)n+=i[t].str.length,t++;g.end={divIdx:t,offset:h-n},r.push(g)}return r},renderMatches:function(e){function t(e,t){var i=e.divIdx;a[i].textContent="",n(i,0,e.offset,t)}function n(e,t,n,s){var r=a[e],d=i[e].str.substring(t,n),o=document.createTextNode(d);if(s){var h=document.createElement("span");return h.className=s,h.appendChild(o),void r.appendChild(h)}r.appendChild(o)}if(0!==e.length){var i=this.textContent.items,a=this.textDivs,s=null,r=this.pageIdx,d=null!==this.findController&&r===this.findController.selected.pageIdx,o=null===this.findController?-1:this.findController.selected.matchIdx,h={divIdx:-1,offset:void 0},g=o,l=g+1;if(null!==this.findController&&this.findController.state.highlightAll)g=0,l=e.length;else if(!d)return;for(var f=g;f<l;f++){var c=e[f],p=c.begin,u=c.end,v=d&&f===o?" selected":"";if(this.findController&&this.findController.updateMatchPosition(r,f,a,p.divIdx,u.divIdx),s&&p.divIdx===s.divIdx?n(s.divIdx,s.offset,p.offset):(null!==s&&n(s.divIdx,s.offset,h.offset),t(p)),p.divIdx===u.divIdx)n(p.divIdx,p.offset,u.offset,"highlight"+v);else{n(p.divIdx,p.offset,h.offset,"highlight begin"+v);for(var m=p.divIdx+1,x=u.divIdx;m<x;m++)a[m].className="highlight middle"+v;t(u,"highlight end"+v)}s=u}s&&n(s.divIdx,s.offset,h.offset)}},updateMatches:function(){if(this.renderingDone){for(var e=this.matches,t=this.textDivs,n=this.textContent.items,i=-1,a=0,s=e.length;a<s;a++){for(var r=e[a],d=Math.max(i,r.begin.divIdx),o=r.end.divIdx;d<=o;d++){var h=t[d];h.textContent=n[d].str,h.className=""}i=r.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}},_bindMouse:function(){var e=this.textLayerDiv;e.addEventListener("mousedown",function(t){var n=e.querySelector(".endOfContent");if(n){var i=t.target!==e;if(i=i&&"none"!==window.getComputedStyle(n).getPropertyValue("-moz-user-select")){var a=e.getBoundingClientRect(),s=Math.max(0,(t.pageY-a.top)/a.height);n.style.top=(100*s).toFixed(2)+"%"}n.classList.add("active")}}),e.addEventListener("mouseup",function(t){var n=e.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))})}},e}(),AnnotationLayerBuilder=function(){function e(e){this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.linkService=e.linkService,this.div=null}return e.prototype={render:function(e,t){var n=this,i={intent:void 0===t?"display":t};this.pdfPage.getAnnotations(i).then(function(t){if(e=e.clone({dontFlip:!0}),i={viewport:e,div:n.div,annotations:t,page:n.pdfPage,linkService:n.linkService},n.div)PDFJS.AnnotationLayer.update(i);else{if(0===t.length)return;n.div=document.createElement("div"),n.div.className="flipbook-annotationLayer",n.pageDiv.appendChild(n.div),i.div=n.div,PDFJS.AnnotationLayer.render(i),"undefined"!=typeof mozL10n&&mozL10n.translate(n.div)}})},hide:function(){this.div&&this.div.setAttribute("hidden","true")}},e}(),PDFLinkService=function(){function e(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return e.prototype={setDocument:function(e,t){this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)},setViewer:function(e){this.pdfViewer=e},setHistory:function(e){this.pdfHistory=e},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},navigateTo:function(e){var t,n="",i=this,a=function(t){var s=t instanceof Object?i._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;s?(s>i.pagesCount&&(s=i.pagesCount),i.pdfViewer.scrollPageIntoView(s,e),i.pdfHistory&&i.pdfHistory.push({dest:e,hash:n,page:s})):i.pdfDocument.getPageIndex(t).then(function(e){var n=e+1,s=t.num+" "+t.gen+" R";i._pagesRefCache[s]=n,a(t)})};"string"==typeof e?(n=e,t=this.pdfDocument.getDestination(e)):t=Promise.resolve(e),t.then(function(t){e=t,t instanceof Array&&a(t[0])})},getDestinationHash:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var t=e[0],n=t instanceof Object?this._pagesRefCache[t.num+" "+t.gen+" R"]:t+1;if(n){var i=this.getAnchorUrl("#page="+n),a=e[1];if("object"==typeof a&&"name"in a&&"XYZ"===a.name){var s=e[4]||this.pdfViewer.currentScaleValue,r=parseFloat(s);r&&(s=100*r),i+="&zoom="+s,(e[2]||e[3])&&(i+=","+(e[2]||0)+","+(e[3]||0))}return i}}return this.getAnchorUrl("")},getAnchorUrl:function(e){return(this.baseUrl||"")+e},setHash:function(e){if(e.indexOf("=")>=0){var t=parseQueryString(e);if("nameddest"in t)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(t.nameddest),void this.navigateTo(t.nameddest);var n,i;if("page"in t&&(n=0|t.page||1),"zoom"in t){var a=t.zoom.split(","),s=a[0],r=parseFloat(s);-1===s.indexOf("Fit")?i=[null,{name:"XYZ"},a.length>1?0|a[1]:null,a.length>2?0|a[2]:null,r?r/100:s]:"Fit"===s||"FitB"===s?i=[null,{name:s}]:"FitH"===s||"FitBH"===s||"FitV"===s||"FitBV"===s?i=[null,{name:s},a.length>1?0|a[1]:null]:"FitR"===s?5!==a.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):i=[null,{name:s},0|a[1],0|a[2],0|a[3],0|a[4]]:console.error("PDFLinkService_setHash: '"+s+"' is not a valid zoom value.")}if(i?this.pdfViewer.scrollPageIntoView(n||this.page,i):n&&(this.page=n),"pagemode"in t){var d=document.createEvent("CustomEvent");d.initCustomEvent("pagemode",!0,!0,{mode:t.pagemode}),this.pdfViewer.container.dispatchEvent(d)}}else/^\d+$/.test(e)?this.page=e:(this.pdfHistory&&this.pdfHistory.updateNextHashParam(unescape(e)),this.navigateTo(unescape(e)))},executeNamedAction:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var t=document.createEvent("CustomEvent");t.initCustomEvent("namedaction",!0,!0,{action:e}),this.pdfViewer.container.dispatchEvent(t)},cachePageRef:function(e,t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e}},e}();